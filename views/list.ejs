<!doctype html>
<html>
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <title>Hello, world!</title>
</head>
<body>
<%- include('nav.html') %>

<div class="container">
    <h4>글목록</h4>
    <div class="container input-group mb-2">
        <input class="form-control" id="search-input">
        <button class="input-group-append btn btn-danger" id="search">검색</button>
    </div>
    <ul class="list-group">
        <% for(let i = 0; i < posts.length ; i++){ %>
            <li class="list-group-item mt-3">
                <h5 scope="row">No: <%= posts[i]._id %></h5>
                <h5><a href="http://localhost:8000/post/read/<%= posts[i]._id %>"> 제목: <%= posts[i].title %></h5></a>
                <h5>날짜: <%= posts[i].date %></h5>

            </li>
        <% } %>
    </ul>

</div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
        crossorigin="anonymous"></script>

<script>
    // <!--      $('.delete').click(function(e){-->
    <!--        let postNo = e.target.dataset.id;-->
    //클릭한 html 요소-->
    <!--        let clickBtn = $(this);-->
    <!--        $.ajax({-->
    <!--          method: 'DELETE',-->
    <!--          url: '/delete',-->
    <!--          data: {_id: postNo}-->
    //done(function(){}) 를 안쓴이유는 그래야 $(this) 값이 변형되지 않기때문이다.-->
    <!--        }).done((res)=>{-->
    <!--          clickBtn.parent('li').fadeOut();-->
    <!--        }).fail(function(xhr, textStatus, errorThrown){-->
    <!--          console.log(xhr, textStatus, errorThrown);-->
    <!--        });-->
    <!--      })-->
    <!--      -->
    $('#search').click(function () {
        let inputValue = $('#search-input').val();
        window.location.replace('/search?value=' + inputValue);
    })



    // <!--      //<input>창에 querystring 쉽게 만드는법-->
    // <!--      //다만 input 안에 name 속성이 있어야함-->
    // <!--      // $(폼태그를 찾고).serialize()-->

</script>
</body>
</html>